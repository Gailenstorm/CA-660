#!/usr/bin/bash
BIN_DIR="$(dirname "$0")"
DATA_DIR=data
RAW_DATA_DIR="$DATA_DIR/raw"
PROCESSED_DATA_DIR="$DATA_DIR/processed"
rm -rf "$PROCESSED_DATA_DIR/"*

RAW_RESIDENTIAL_FILE="$RAW_DATA_DIR/property.csv"
RAW_EIRCODE_FILE="$RAW_DATA_DIR/eircodes.csv"
RAW_POPULATION_FILE="$RAW_DATA_DIR/population.csv"
RAW_RENT_FILE="$RAW_DATA_DIR/rent.csv"
RAW_INCOME_FILE="$RAW_DATA_DIR/income.csv"

PROCESSED_RESIDENTIAL_FILE="$PROCESSED_DATA_DIR/property.csv"
PROCESSED_POPULATION_FILE="$PROCESSED_DATA_DIR/population.csv"
PROCESSED_RENT_FILE="$PROCESSED_DATA_DIR/rent.csv"
PROCESSED_INCOME_FILE="$PROCESSED_DATA_DIR/income.csv"

awk -f "$BIN_DIR/process-property-file.awk" "$RAW_EIRCODE_FILE" "$RAW_RESIDENTIAL_FILE" > "$PROCESSED_RESIDENTIAL_FILE"
awk -f "$BIN_DIR/process-population-file.awk" "$RAW_POPULATION_FILE" > "$PROCESSED_POPULATION_FILE"
awk -f "$BIN_DIR/process-rent-file.awk" "$RAW_RENT_FILE" > "$PROCESSED_RENT_FILE"
awk -f "$BIN_DIR/process-income-file.awk" "$RAW_INCOME_FILE" > "$PROCESSED_INCOME_FILE"
